<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Calculator</title>
    <!-- Use Tailwind CSS for a modern, responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <!-- Main calculator container -->
    <div class="bg-white p-6 rounded-3xl shadow-2xl w-full max-w-xs mx-4 sm:max-w-sm md:max-w-md">
        <h1 class="text-2xl font-bold text-gray-800 mb-4 text-center">Calculator</h1>
        
        <!-- Display screen -->
        <div class="bg-gray-800 text-right p-4 rounded-xl mb-4 shadow-inner">
            <div id="previous-operand" class="text-gray-400 text-sm h-6 overflow-hidden"></div>
            <div id="current-operand" class="text-white text-3xl font-light h-10 overflow-hidden">0</div>
        </div>
        
        <!-- Calculator buttons grid -->
        <div class="grid grid-cols-4 gap-3">
            <!-- First row: Clear and operators -->
            <button class="col-span-2 bg-gray-200 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-300 transition" data-clear>AC</button>
            <button class="bg-gray-200 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-300 transition" data-operation>÷</button>
            <button class="bg-gray-200 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-300 transition" data-operation>x</button>

            <!-- Number and operator buttons -->
            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>7</button>
            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>8</button>
            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>9</button>
            <button class="bg-gray-200 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-300 transition" data-operation>-</button>

            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>4</button>
            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>5</button>
            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>6</button>
            <button class="bg-gray-200 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-300 transition" data-operation>+</button>

            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>1</button>
            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>2</button>
            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>3</button>
            <button class="col-span-2 bg-indigo-500 text-white font-semibold p-4 rounded-full shadow-md hover:bg-indigo-600 transition" data-equals>=</button>

            <!-- Last row -->
            <button class="col-span-2 bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>0</button>
            <button class="bg-gray-300 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-400 transition" data-number>.</button>
            <button class="bg-gray-200 text-gray-800 font-semibold p-4 rounded-full shadow-md hover:bg-gray-300 transition" data-backspace>←</button>
        </div>
    </div>

    <!-- JavaScript for calculator logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const previousOperandTextElement = document.getElementById('previous-operand');
            const currentOperandTextElement = document.getElementById('current-operand');
            
            const numberButtons = document.querySelectorAll('[data-number]');
            const operationButtons = document.querySelectorAll('[data-operation]');
            const equalsButton = document.querySelector('[data-equals]');
            const clearButton = document.querySelector('[data-clear]');
            const backspaceButton = document.querySelector('[data-backspace]');

            let currentOperand = '';
            let previousOperand = '';
            let operation = undefined;

            function clear() {
                currentOperand = '';
                previousOperand = '';
                operation = undefined;
                updateDisplay();
            }

            function appendNumber(number) {
                if (currentOperand === 'Error') {
                    currentOperand = '';
                }
                if (number === '.' && currentOperand.includes('.')) return;
                currentOperand = currentOperand.toString() + number.toString();
                updateDisplay();
            }

            function chooseOperation(op) {
                if (currentOperand === 'Error') {
                    currentOperand = '';
                }
                if (currentOperand === '') return;
                if (previousOperand !== '') {
                    compute();
                }
                operation = op;
                previousOperand = currentOperand;
                currentOperand = '';
                updateDisplay();
            }

            function compute() {
                let computation;
                const prev = parseFloat(previousOperand);
                const current = parseFloat(currentOperand);
                if (isNaN(prev) || isNaN(current)) return;
                switch (operation) {
                    case '+':
                        computation = prev + current;
                        break;
                    case '-':
                        computation = prev - current;
                        break;
                    case 'x':
                        computation = prev * current;
                        break;
                    case '÷':
                        if (current === 0) {
                            console.error('Cannot divide by zero.');
                            currentOperand = 'Error';
                            previousOperand = '';
                            operation = undefined;
                            updateDisplay();
                            return;
                        }
                        computation = prev / current;
                        break;
                    default:
                        return;
                }
                currentOperand = computation;
                operation = undefined;
                previousOperand = '';
                updateDisplay();
            }

            function backspace() {
                currentOperand = currentOperand.toString().slice(0, -1);
                updateDisplay();
            }

            function updateDisplay() {
                // If the current operand is empty, show '0' on the display
                // This ensures a number is always visible when not in an operation
                if (currentOperand === '') {
                    currentOperandTextElement.innerText = '0';
                } else {
                    currentOperandTextElement.innerText = currentOperand;
                }
                
                if (operation != null) {
                    previousOperandTextElement.innerText = `${previousOperand} ${operation}`;
                } else {
                    previousOperandTextElement.innerText = '';
                }
            }
            
            // Add event listeners for all buttons
            numberButtons.forEach(button => {
                button.addEventListener('click', () => {
                    appendNumber(button.innerText);
                });
            });

            operationButtons.forEach(button => {
                button.addEventListener('click', () => {
                    chooseOperation(button.innerText);
                });
            });

            equalsButton.addEventListener('click', button => {
                compute();
            });

            clearButton.addEventListener('click', button => {
                clear();
            });

            backspaceButton.addEventListener('click', button => {
                backspace();
            });

            // Initial state
            clear();
            updateDisplay(); // Call updateDisplay once at the start to ensure '0' is shown
        });
    </script>
</body>
</html>
